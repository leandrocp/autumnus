<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>elixir - kanagawa_lotus - Autumnus</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.5;
        }
        pre {
            font-size: 15px;
            margin: 20px;
            padding: 50px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
<pre class="athl" style="color: #545464; background-color: #f2ecbc;"><code class="language-elixir" translate="no" tabindex="0"><span class="athl-line" data-athl-line="1"># Single line comments start with a number symbol.
</span><span class="athl-line" data-athl-line="2">
</span><span class="athl-line" data-athl-line="3"># There&#39;s no multi-line comment,
</span><span class="athl-line" data-athl-line="4"># but you can stack multiple comments.
</span><span class="athl-line" data-athl-line="5">
</span><span class="athl-line" data-athl-line="6"># To use the Elixir shell use the `iex` command.
</span><span class="athl-line" data-athl-line="7"># Compile your modules with the `elixirc` command.
</span><span class="athl-line" data-athl-line="8">
</span><span class="athl-line" data-athl-line="9"># Both should be in your path if you installed Elixir correctly.
</span><span class="athl-line" data-athl-line="10">
</span><span class="athl-line" data-athl-line="11">## ---------------------------
</span><span class="athl-line" data-athl-line="12">## -- Basic types
</span><span class="athl-line" data-athl-line="13">## ---------------------------
</span><span class="athl-line" data-athl-line="14">
</span><span class="athl-line" data-athl-line="15"># There are numbers
</span><span class="athl-line" data-athl-line="16"><span style="color: #b35b79;">3</span>    # integer
</span><span class="athl-line" data-athl-line="17"><span style="color: #b35b79;">0x1F</span> # integer
</span><span class="athl-line" data-athl-line="18"><span style="color: #b35b79;">3.0</span>  # float
</span><span class="athl-line" data-athl-line="19">
</span><span class="athl-line" data-athl-line="20"># Atoms are constants whose values are their own name. They start with `:`.
</span><span class="athl-line" data-athl-line="21"><span style="color: #77713f;">:hello</span> # atom
</span><span class="athl-line" data-athl-line="22">
</span><span class="athl-line" data-athl-line="23"># Tuples that are stored contiguously in memory.
</span><span class="athl-line" data-athl-line="24"><span style="color: #4e8ca2;">{</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span> # tuple
</span><span class="athl-line" data-athl-line="25">
</span><span class="athl-line" data-athl-line="26"># We can access a tuple element with the `elem` function:
</span><span class="athl-line" data-athl-line="27"><span style="color: #4d699b;">elem</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">0</span><span style="color: #4e8ca2;">)</span> #=&gt; 1
</span><span class="athl-line" data-athl-line="28">
</span><span class="athl-line" data-athl-line="29"># Lists that are implemented as linked lists.
</span><span class="athl-line" data-athl-line="30"><span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">]</span> # list
</span><span class="athl-line" data-athl-line="31">
</span><span class="athl-line" data-athl-line="32"># We can access the head and tail of a list as follows:
</span><span class="athl-line" data-athl-line="33"><span style="color: #4e8ca2;">[</span><span style="color: #8a8980;">head</span> <span style="color: #836f4a;">|</span> <span style="color: #8a8980;">tail</span><span style="color: #4e8ca2;">]</span> <span style="color: #836f4a;">=</span> <span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">]</span>
</span><span class="athl-line" data-athl-line="34"><span style="color: #8a8980;">head</span> #=&gt; 1
</span><span class="athl-line" data-athl-line="35"><span style="color: #8a8980;">tail</span> #=&gt; [2,3]
</span><span class="athl-line" data-athl-line="36">
</span><span class="athl-line" data-athl-line="37"># In Elixir, just like in Erlang, the `=` denotes pattern matching and
</span><span class="athl-line" data-athl-line="38"># not an assignment.
</span><span class="athl-line" data-athl-line="39">#
</span><span class="athl-line" data-athl-line="40"># This means that the left-hand side (pattern) is matched against a
</span><span class="athl-line" data-athl-line="41"># right-hand side.
</span><span class="athl-line" data-athl-line="42">#
</span><span class="athl-line" data-athl-line="43"># This is how the above example of accessing the head and tail of a list works.
</span><span class="athl-line" data-athl-line="44">
</span><span class="athl-line" data-athl-line="45"># A pattern match will error when the sides don&#39;t match, in this example
</span><span class="athl-line" data-athl-line="46"># the tuples have different sizes.
</span><span class="athl-line" data-athl-line="47"># {a, b, c} = {1, 2} #=&gt; ** (MatchError) no match of right hand side value: {1,2}
</span><span class="athl-line" data-athl-line="48">
</span><span class="athl-line" data-athl-line="49"># There are also binaries
</span><span class="athl-line" data-athl-line="50"><span style="color: #4e8ca2;">&lt;&lt;</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">&gt;&gt;</span> # binary
</span><span class="athl-line" data-athl-line="51">
</span><span class="athl-line" data-athl-line="52"># Strings and char lists
</span><span class="athl-line" data-athl-line="53"><span style="color: #6f894e;">&quot;hello&quot;</span> # string
</span><span class="athl-line" data-athl-line="54"><span style="color: #6f894e;">&#39;hello&#39;</span> # char list
</span><span class="athl-line" data-athl-line="55">
</span><span class="athl-line" data-athl-line="56"># Multi-line strings
</span><span class="athl-line" data-athl-line="57"><span style="color: #6f894e;">&quot;&quot;&quot;</span>
</span><span class="athl-line" data-athl-line="58"><span style="color: #6f894e;">I&#39;m a multi-line</span>
</span><span class="athl-line" data-athl-line="59"><span style="color: #6f894e;">string.</span>
</span><span class="athl-line" data-athl-line="60"><span style="color: #6f894e;">&quot;&quot;&quot;</span>
</span><span class="athl-line" data-athl-line="61">#=&gt; &quot;I&#39;m a multi-line\nstring.\n&quot;
</span><span class="athl-line" data-athl-line="62">
</span><span class="athl-line" data-athl-line="63"># Strings are all encoded in UTF-8:
</span><span class="athl-line" data-athl-line="64"><span style="color: #6f894e;">&quot;héllò&quot;</span> #=&gt; &quot;héllò&quot;
</span><span class="athl-line" data-athl-line="65">
</span><span class="athl-line" data-athl-line="66"># Strings are really just binaries, and char lists are just lists.
</span><span class="athl-line" data-athl-line="67"><span style="color: #4e8ca2;">&lt;&lt;</span><span style="color: #6f894e;">?a</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">?b</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">?c</span><span style="color: #4e8ca2;">&gt;&gt;</span> #=&gt; &quot;abc&quot;
</span><span class="athl-line" data-athl-line="68"><span style="color: #4e8ca2;">[</span><span style="color: #6f894e;">?a</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">?b</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">?c</span><span style="color: #4e8ca2;">]</span>   #=&gt; &#39;abc&#39;
</span><span class="athl-line" data-athl-line="69">
</span><span class="athl-line" data-athl-line="70"># `?a` in Elixir returns the ASCII integer for the letter `a`
</span><span class="athl-line" data-athl-line="71"><span style="color: #6f894e;">?a</span> #=&gt; 97
</span><span class="athl-line" data-athl-line="72">
</span><span class="athl-line" data-athl-line="73"># To concatenate lists use `++`, for binaries use `&lt;&gt;`
</span><span class="athl-line" data-athl-line="74"><span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">]</span> <span style="color: #836f4a;">++</span> <span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">4</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">5</span><span style="color: #4e8ca2;">]</span>     #=&gt; [1,2,3,4,5]
</span><span class="athl-line" data-athl-line="75"><span style="color: #6f894e;">&#39;hello &#39;</span> <span style="color: #836f4a;">++</span> <span style="color: #6f894e;">&#39;world&#39;</span>  #=&gt; &#39;hello world&#39;
</span><span class="athl-line" data-athl-line="76">
</span><span class="athl-line" data-athl-line="77"><span style="color: #4e8ca2;">&lt;&lt;</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">&gt;&gt;</span> <span style="color: #836f4a;">&lt;&gt;</span> <span style="color: #4e8ca2;">&lt;&lt;</span><span style="color: #b35b79;">4</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">5</span><span style="color: #4e8ca2;">&gt;&gt;</span> #=&gt; &lt;&lt;1,2,3,4,5&gt;&gt;
</span><span class="athl-line" data-athl-line="78"><span style="color: #6f894e;">&quot;hello &quot;</span> <span style="color: #836f4a;">&lt;&gt;</span> <span style="color: #6f894e;">&quot;world&quot;</span>  #=&gt; &quot;hello world&quot;
</span><span class="athl-line" data-athl-line="79">
</span><span class="athl-line" data-athl-line="80"># Ranges are represented as `start..end` (both inclusive)
</span><span class="athl-line" data-athl-line="81"><span style="color: #b35b79;">1</span><span style="color: #836f4a;">..</span><span style="color: #b35b79;">10</span> #=&gt; 1..10
</span><span class="athl-line" data-athl-line="82"><span style="color: #8a8980;">lower</span><span style="color: #836f4a;">..</span><span style="color: #8a8980;">upper</span> <span style="color: #836f4a;">=</span> <span style="color: #b35b79;">1</span><span style="color: #836f4a;">..</span><span style="color: #b35b79;">10</span> # Can use pattern matching on ranges as well
</span><span class="athl-line" data-athl-line="83"><span style="color: #4e8ca2;">[</span><span style="color: #8a8980;">lower</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">upper</span><span style="color: #4e8ca2;">]</span> #=&gt; [1, 10]
</span><span class="athl-line" data-athl-line="84">
</span><span class="athl-line" data-athl-line="85"># Maps are key-value pairs
</span><span class="athl-line" data-athl-line="86"><span style="color: #8a8980;">genders</span> <span style="color: #836f4a;">=</span> <span style="color: #6693bf;">%</span><span style="color: #4e8ca2;">{</span><span style="color: #6f894e;">&quot;david&quot;</span> <span style="color: #836f4a;">=&gt;</span> <span style="color: #6f894e;">&quot;male&quot;</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">&quot;gillian&quot;</span> <span style="color: #836f4a;">=&gt;</span> <span style="color: #6f894e;">&quot;female&quot;</span><span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="87"><span style="color: #8a8980;">genders</span><span style="color: #4e8ca2;">[</span><span style="color: #6f894e;">&quot;david&quot;</span><span style="color: #4e8ca2;">]</span> #=&gt; &quot;male&quot;
</span><span class="athl-line" data-athl-line="88">
</span><span class="athl-line" data-athl-line="89"># Maps with atom keys can be used like this
</span><span class="athl-line" data-athl-line="90"><span style="color: #8a8980;">genders</span> <span style="color: #836f4a;">=</span> <span style="color: #6693bf;">%</span><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">david: </span><span style="color: #6f894e;">&quot;male&quot;</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">gillian: </span><span style="color: #6f894e;">&quot;female&quot;</span><span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="91"><span style="color: #8a8980;">genders</span><span style="color: #836f4a;">.</span><span style="color: #8a8980;">gillian</span> #=&gt; &quot;female&quot;
</span><span class="athl-line" data-athl-line="92">
</span><span class="athl-line" data-athl-line="93">## ---------------------------
</span><span class="athl-line" data-athl-line="94">## -- Operators
</span><span class="athl-line" data-athl-line="95">## ---------------------------
</span><span class="athl-line" data-athl-line="96">
</span><span class="athl-line" data-athl-line="97"># Some math
</span><span class="athl-line" data-athl-line="98"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">+</span> <span style="color: #b35b79;">1</span>  #=&gt; 2
</span><span class="athl-line" data-athl-line="99"><span style="color: #b35b79;">10</span> <span style="color: #836f4a;">-</span> <span style="color: #b35b79;">5</span> #=&gt; 5
</span><span class="athl-line" data-athl-line="100"><span style="color: #b35b79;">5</span> <span style="color: #836f4a;">*</span> <span style="color: #b35b79;">2</span>  #=&gt; 10
</span><span class="athl-line" data-athl-line="101"><span style="color: #b35b79;">10</span> <span style="color: #836f4a;">/</span> <span style="color: #b35b79;">2</span> #=&gt; 5.0
</span><span class="athl-line" data-athl-line="102">
</span><span class="athl-line" data-athl-line="103"># In Elixir the operator `/` always returns a float.
</span><span class="athl-line" data-athl-line="104">
</span><span class="athl-line" data-athl-line="105"># To do integer division use `div`
</span><span class="athl-line" data-athl-line="106"><span style="color: #4d699b;">div</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">10</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">)</span> #=&gt; 5
</span><span class="athl-line" data-athl-line="107">
</span><span class="athl-line" data-athl-line="108"># To get the division remainder use `rem`
</span><span class="athl-line" data-athl-line="109"><span style="color: #4d699b;">rem</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">10</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">)</span> #=&gt; 1
</span><span class="athl-line" data-athl-line="110">
</span><span class="athl-line" data-athl-line="111"># There are also boolean operators: `or`, `and` and `not`.
</span><span class="athl-line" data-athl-line="112"># These operators expect a boolean as their first argument.
</span><span class="athl-line" data-athl-line="113"><span style="color: #cc6d00; font-weight: bold;">true</span> <span style="color: #836f4a; font-weight: bold;">and</span> <span style="color: #cc6d00; font-weight: bold;">true</span> #=&gt; true
</span><span class="athl-line" data-athl-line="114"><span style="color: #cc6d00; font-weight: bold;">false</span> <span style="color: #836f4a; font-weight: bold;">or</span> <span style="color: #cc6d00; font-weight: bold;">true</span> #=&gt; true
</span><span class="athl-line" data-athl-line="115"># 1 and true
</span><span class="athl-line" data-athl-line="116">#=&gt; ** (BadBooleanError) expected a boolean on left-side of &quot;and&quot;, got: 1
</span><span class="athl-line" data-athl-line="117">
</span><span class="athl-line" data-athl-line="118"># Elixir also provides `||`, `&amp;&amp;` and `!` which accept arguments of any type.
</span><span class="athl-line" data-athl-line="119"># All values except `false` and `nil` will evaluate to true.
</span><span class="athl-line" data-athl-line="120"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">||</span> <span style="color: #cc6d00; font-weight: bold;">true</span>  #=&gt; 1
</span><span class="athl-line" data-athl-line="121"><span style="color: #cc6d00; font-weight: bold;">false</span> <span style="color: #836f4a;">&amp;&amp;</span> <span style="color: #b35b79;">1</span> #=&gt; false
</span><span class="athl-line" data-athl-line="122"><span style="color: #6693bf;">nil</span> <span style="color: #836f4a;">&amp;&amp;</span> <span style="color: #b35b79;">20</span>  #=&gt; nil
</span><span class="athl-line" data-athl-line="123"><span style="color: #836f4a;">!</span><span style="color: #cc6d00; font-weight: bold;">true</span> #=&gt; false
</span><span class="athl-line" data-athl-line="124">
</span><span class="athl-line" data-athl-line="125"># For comparisons we have: `==`, `!=`, `===`, `!==`, `&lt;=`, `&gt;=`, `&lt;` and `&gt;`
</span><span class="athl-line" data-athl-line="126"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">1</span> #=&gt; true
</span><span class="athl-line" data-athl-line="127"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">!=</span> <span style="color: #b35b79;">1</span> #=&gt; false
</span><span class="athl-line" data-athl-line="128"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">&lt;</span> <span style="color: #b35b79;">2</span>  #=&gt; true
</span><span class="athl-line" data-athl-line="129">
</span><span class="athl-line" data-athl-line="130"># `===` and `!==` are more strict when comparing integers and floats:
</span><span class="athl-line" data-athl-line="131"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">1.0</span>  #=&gt; true
</span><span class="athl-line" data-athl-line="132"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">===</span> <span style="color: #b35b79;">1.0</span> #=&gt; false
</span><span class="athl-line" data-athl-line="133">
</span><span class="athl-line" data-athl-line="134"># Elixir operators are strict in their arguments, with the exception
</span><span class="athl-line" data-athl-line="135"># of comparison operators that work across different data types:
</span><span class="athl-line" data-athl-line="136"><span style="color: #b35b79;">1</span> <span style="color: #836f4a;">&lt;</span> <span style="color: #77713f;">:hello</span> #=&gt; true
</span><span class="athl-line" data-athl-line="137">
</span><span class="athl-line" data-athl-line="138"># This enables building collections of mixed types:
</span><span class="athl-line" data-athl-line="139"><span style="color: #4e8ca2;">[</span><span style="color: #6f894e;">&quot;string&quot;</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">123</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:atom</span><span style="color: #4e8ca2;">]</span>
</span><span class="athl-line" data-athl-line="140">
</span><span class="athl-line" data-athl-line="141"># While there is an overall order of all data types,
</span><span class="athl-line" data-athl-line="142"># to quote Joe Armstrong on this: &quot;The actual order is not important,
</span><span class="athl-line" data-athl-line="143"># but that a total ordering is well defined is important.&quot;
</span><span class="athl-line" data-athl-line="144">
</span><span class="athl-line" data-athl-line="145">## ---------------------------
</span><span class="athl-line" data-athl-line="146">## -- Control Flow
</span><span class="athl-line" data-athl-line="147">## ---------------------------
</span><span class="athl-line" data-athl-line="148">
</span><span class="athl-line" data-athl-line="149"># `if` expression
</span><span class="athl-line" data-athl-line="150"><span style="color: #624c83;">if</span> <span style="color: #cc6d00; font-weight: bold;">false</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="151">  <span style="color: #6f894e;">&quot;This will never be seen&quot;</span>
</span><span class="athl-line" data-athl-line="152"><span style="color: #624c83;">else</span>
</span><span class="athl-line" data-athl-line="153">  <span style="color: #6f894e;">&quot;This will&quot;</span>
</span><span class="athl-line" data-athl-line="154"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="155">
</span><span class="athl-line" data-athl-line="156"># There&#39;s also `unless`
</span><span class="athl-line" data-athl-line="157"><span style="color: #624c83;">unless</span> <span style="color: #cc6d00; font-weight: bold;">true</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="158">  <span style="color: #6f894e;">&quot;This will never be seen&quot;</span>
</span><span class="athl-line" data-athl-line="159"><span style="color: #624c83;">else</span>
</span><span class="athl-line" data-athl-line="160">  <span style="color: #6f894e;">&quot;This will&quot;</span>
</span><span class="athl-line" data-athl-line="161"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="162">
</span><span class="athl-line" data-athl-line="163"># Remember pattern matching? Many control-flow structures in Elixir rely on it.
</span><span class="athl-line" data-athl-line="164">
</span><span class="athl-line" data-athl-line="165"># `case` allows us to compare a value against many patterns:
</span><span class="athl-line" data-athl-line="166"><span style="color: #624c83;">case</span> <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:one</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:two</span><span style="color: #4e8ca2;">}</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="167">  <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:four</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:five</span><span style="color: #4e8ca2;">}</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="168">    <span style="color: #6f894e;">&quot;This won&#39;t match&quot;</span>
</span><span class="athl-line" data-athl-line="169">  <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:one</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">}</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="170">    <span style="color: #6f894e;">&quot;This will match and bind `x` to `:two` in this clause&quot;</span>
</span><span class="athl-line" data-athl-line="171">  <span style="color: #8a8980;">_</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="172">    <span style="color: #6f894e;">&quot;This will match any value&quot;</span>
</span><span class="athl-line" data-athl-line="173"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="174">
</span><span class="athl-line" data-athl-line="175"># It&#39;s common to bind the value to `_` if we don&#39;t need it.
</span><span class="athl-line" data-athl-line="176"># For example, if only the head of a list matters to us:
</span><span class="athl-line" data-athl-line="177"><span style="color: #4e8ca2;">[</span><span style="color: #8a8980;">head</span> <span style="color: #836f4a;">|</span> <span style="color: #8a8980;">_</span><span style="color: #4e8ca2;">]</span> <span style="color: #836f4a;">=</span> <span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">]</span>
</span><span class="athl-line" data-athl-line="178"><span style="color: #8a8980;">head</span> #=&gt; 1
</span><span class="athl-line" data-athl-line="179">
</span><span class="athl-line" data-athl-line="180"># For better readability we can do the following:
</span><span class="athl-line" data-athl-line="181"><span style="color: #4e8ca2;">[</span><span style="color: #8a8980;">head</span> <span style="color: #836f4a;">|</span> <span style="color: #8a8980;">_tail</span><span style="color: #4e8ca2;">]</span> <span style="color: #836f4a;">=</span> <span style="color: #4e8ca2;">[</span><span style="color: #77713f;">:a</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:b</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:c</span><span style="color: #4e8ca2;">]</span>
</span><span class="athl-line" data-athl-line="182"><span style="color: #8a8980;">head</span> #=&gt; :a
</span><span class="athl-line" data-athl-line="183">
</span><span class="athl-line" data-athl-line="184"># `cond` lets us check for many conditions at the same time.
</span><span class="athl-line" data-athl-line="185"># Use `cond` instead of nesting many `if` expressions.
</span><span class="athl-line" data-athl-line="186"><span style="color: #624c83;">cond</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="187">  <span style="color: #b35b79;">1</span> <span style="color: #836f4a;">+</span> <span style="color: #b35b79;">1</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">3</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="188">    <span style="color: #6f894e;">&quot;I will never be seen&quot;</span>
</span><span class="athl-line" data-athl-line="189">  <span style="color: #b35b79;">2</span> <span style="color: #836f4a;">*</span> <span style="color: #b35b79;">5</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">12</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="190">    <span style="color: #6f894e;">&quot;Me neither&quot;</span>
</span><span class="athl-line" data-athl-line="191">  <span style="color: #b35b79;">1</span> <span style="color: #836f4a;">+</span> <span style="color: #b35b79;">2</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">3</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="192">    <span style="color: #6f894e;">&quot;But I will&quot;</span>
</span><span class="athl-line" data-athl-line="193"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="194">
</span><span class="athl-line" data-athl-line="195"># It is common to set the last condition equal to `true`, which will always match.
</span><span class="athl-line" data-athl-line="196"><span style="color: #624c83;">cond</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="197">  <span style="color: #b35b79;">1</span> <span style="color: #836f4a;">+</span> <span style="color: #b35b79;">1</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">3</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="198">    <span style="color: #6f894e;">&quot;I will never be seen&quot;</span>
</span><span class="athl-line" data-athl-line="199">  <span style="color: #b35b79;">2</span> <span style="color: #836f4a;">*</span> <span style="color: #b35b79;">5</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">12</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="200">    <span style="color: #6f894e;">&quot;Me neither&quot;</span>
</span><span class="athl-line" data-athl-line="201">  <span style="color: #cc6d00; font-weight: bold;">true</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="202">    <span style="color: #6f894e;">&quot;But I will (this is essentially an else)&quot;</span>
</span><span class="athl-line" data-athl-line="203"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="204">
</span><span class="athl-line" data-athl-line="205"># `try/catch` is used to catch values that are thrown, it also supports an
</span><span class="athl-line" data-athl-line="206"># `after` clause that is invoked whether or not a value is caught.
</span><span class="athl-line" data-athl-line="207"><span style="color: #624c83;">try</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="208">  <span style="color: #624c83;">throw</span><span style="color: #4e8ca2;">(</span><span style="color: #77713f;">:hello</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="209"><span style="color: #624c83;">catch</span>
</span><span class="athl-line" data-athl-line="210">  <span style="color: #8a8980;">message</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #6f894e;">&quot;Got <span style="color: #6693bf;">#{</span><span style="color: #8a8980;">message</span><span style="color: #6693bf;">}</span>.&quot;</span>
</span><span class="athl-line" data-athl-line="211"><span style="color: #624c83;">after</span>
</span><span class="athl-line" data-athl-line="212">  <span style="color: #597b75;">IO</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">puts</span><span style="color: #4e8ca2;">(</span><span style="color: #6f894e;">&quot;I&#39;m the after clause.&quot;</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="213"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="214">#=&gt; I&#39;m the after clause
</span><span class="athl-line" data-athl-line="215"># &quot;Got :hello&quot;
</span><span class="athl-line" data-athl-line="216">
</span><span class="athl-line" data-athl-line="217">## ---------------------------
</span><span class="athl-line" data-athl-line="218">## -- Modules and Functions
</span><span class="athl-line" data-athl-line="219">## ---------------------------
</span><span class="athl-line" data-athl-line="220">
</span><span class="athl-line" data-athl-line="221"># Anonymous functions (notice the dot)
</span><span class="athl-line" data-athl-line="222"><span style="color: #8a8980;">square</span> <span style="color: #836f4a;">=</span> <span style="color: #624c83;">fn</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">)</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">x</span> <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="223"><span style="color: #8a8980;">square</span><span style="color: #836f4a;">.</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">5</span><span style="color: #4e8ca2;">)</span> #=&gt; 25
</span><span class="athl-line" data-athl-line="224">
</span><span class="athl-line" data-athl-line="225"># They also accept many clauses and guards.
</span><span class="athl-line" data-athl-line="226"># Guards let you fine tune pattern matching,
</span><span class="athl-line" data-athl-line="227"># they are indicated by the `when` keyword:
</span><span class="athl-line" data-athl-line="228"><span style="color: #8a8980;">f</span> <span style="color: #836f4a;">=</span> <span style="color: #624c83;">fn</span>
</span><span class="athl-line" data-athl-line="229">  <span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">y</span> <span style="color: #624c83;">when</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">&gt;</span> <span style="color: #b35b79;">0</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">+</span> <span style="color: #8a8980;">y</span>
</span><span class="athl-line" data-athl-line="230">  <span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">y</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">y</span>
</span><span class="athl-line" data-athl-line="231"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="232">
</span><span class="athl-line" data-athl-line="233"><span style="color: #8a8980;">f</span><span style="color: #836f4a;">.</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">)</span>  #=&gt; 4
</span><span class="athl-line" data-athl-line="234"><span style="color: #8a8980;">f</span><span style="color: #836f4a;">.</span><span style="color: #4e8ca2;">(</span><span style="color: #836f4a;">-</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">)</span> #=&gt; -3
</span><span class="athl-line" data-athl-line="235">
</span><span class="athl-line" data-athl-line="236"># Elixir also provides many built-in functions.
</span><span class="athl-line" data-athl-line="237"># These are available in the current scope.
</span><span class="athl-line" data-athl-line="238"><span style="color: #4d699b;">is_number</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">10</span><span style="color: #4e8ca2;">)</span>    #=&gt; true
</span><span class="athl-line" data-athl-line="239"><span style="color: #4d699b;">is_list</span><span style="color: #4e8ca2;">(</span><span style="color: #6f894e;">&quot;hello&quot;</span><span style="color: #4e8ca2;">)</span> #=&gt; false
</span><span class="athl-line" data-athl-line="240"><span style="color: #4d699b;">elem</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">0</span><span style="color: #4e8ca2;">)</span> #=&gt; 1
</span><span class="athl-line" data-athl-line="241">
</span><span class="athl-line" data-athl-line="242"># You can group several functions into a module. Inside a module use `def`
</span><span class="athl-line" data-athl-line="243"># to define your functions.
</span><span class="athl-line" data-athl-line="244"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">Math</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="245">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">sum</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">a</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">b</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="246">    <span style="color: #8a8980;">a</span> <span style="color: #836f4a;">+</span> <span style="color: #8a8980;">b</span>
</span><span class="athl-line" data-athl-line="247">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="248">
</span><span class="athl-line" data-athl-line="249">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">square</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="250">    <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">x</span>
</span><span class="athl-line" data-athl-line="251">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="252"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="253">
</span><span class="athl-line" data-athl-line="254"><span style="color: #597b75;">Math</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">sum</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">)</span>  #=&gt; 3
</span><span class="athl-line" data-athl-line="255"><span style="color: #597b75;">Math</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">square</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">)</span> #=&gt; 9
</span><span class="athl-line" data-athl-line="256">
</span><span class="athl-line" data-athl-line="257"># To compile our simple Math module save it as `math.ex` and use `elixirc`
</span><span class="athl-line" data-athl-line="258"># in your terminal: elixirc math.ex
</span><span class="athl-line" data-athl-line="259">
</span><span class="athl-line" data-athl-line="260"># Inside a module we can define functions with `def` and private functions with `defp`.
</span><span class="athl-line" data-athl-line="261"># A function defined with `def` is available to be invoked from other modules,
</span><span class="athl-line" data-athl-line="262"># a private function can only be invoked locally.
</span><span class="athl-line" data-athl-line="263"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">PrivateMath</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="264">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">sum</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">a</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">b</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="265">    <span style="color: #4d699b;">do_sum</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">a</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">b</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="266">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="267">
</span><span class="athl-line" data-athl-line="268">  <span style="color: #624c83;">defp</span> <span style="color: #4d699b;">do_sum</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">a</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">b</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="269">    <span style="color: #8a8980;">a</span> <span style="color: #836f4a;">+</span> <span style="color: #8a8980;">b</span>
</span><span class="athl-line" data-athl-line="270">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="271"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="272">
</span><span class="athl-line" data-athl-line="273"><span style="color: #597b75;">PrivateMath</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">sum</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">)</span>    #=&gt; 3
</span><span class="athl-line" data-athl-line="274"># PrivateMath.do_sum(1, 2) #=&gt; ** (UndefinedFunctionError)
</span><span class="athl-line" data-athl-line="275">
</span><span class="athl-line" data-athl-line="276"># Function declarations also support guards and multiple clauses.
</span><span class="athl-line" data-athl-line="277"># When a function with multiple clauses is called, the first function
</span><span class="athl-line" data-athl-line="278"># that satisfies the clause will be invoked.
</span><span class="athl-line" data-athl-line="279"># Example: invoking area({:circle, 3}) will call the second area
</span><span class="athl-line" data-athl-line="280"># function defined below, not the first:
</span><span class="athl-line" data-athl-line="281"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">Geometry</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="282">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">area</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:rectangle</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">w</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">h</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="283">    <span style="color: #8a8980;">w</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">h</span>
</span><span class="athl-line" data-athl-line="284">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="285">
</span><span class="athl-line" data-athl-line="286">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">area</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:circle</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">r</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">when</span> <span style="color: #4d699b;">is_number</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">r</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="287">    <span style="color: #b35b79;">3.14</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">r</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">r</span>
</span><span class="athl-line" data-athl-line="288">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="289"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="290">
</span><span class="athl-line" data-athl-line="291"><span style="color: #597b75;">Geometry</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">area</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:rectangle</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">)</span> #=&gt; 6
</span><span class="athl-line" data-athl-line="292"><span style="color: #597b75;">Geometry</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">area</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:circle</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span><span style="color: #4e8ca2;">)</span>       #=&gt; 28.25999999999999801048
</span><span class="athl-line" data-athl-line="293"># Geometry.area({:circle, &quot;not_a_number&quot;})
</span><span class="athl-line" data-athl-line="294">#=&gt; ** (FunctionClauseError) no function clause matching in Geometry.area/1
</span><span class="athl-line" data-athl-line="295">
</span><span class="athl-line" data-athl-line="296"># Due to immutability, recursion is a big part of Elixir
</span><span class="athl-line" data-athl-line="297"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">Recursion</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="298">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">sum_list</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">[</span><span style="color: #8a8980;">head</span> <span style="color: #836f4a;">|</span> <span style="color: #8a8980;">tail</span><span style="color: #4e8ca2;">]</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">acc</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="299">    <span style="color: #4d699b;">sum_list</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">tail</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">acc</span> <span style="color: #836f4a;">+</span> <span style="color: #8a8980;">head</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="300">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="301">
</span><span class="athl-line" data-athl-line="302">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">sum_list</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">[</span><span style="color: #4e8ca2;">]</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">acc</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="303">    <span style="color: #8a8980;">acc</span>
</span><span class="athl-line" data-athl-line="304">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="305"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="306">
</span><span class="athl-line" data-athl-line="307"><span style="color: #597b75;">Recursion</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">sum_list</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">[</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">]</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">0</span><span style="color: #4e8ca2;">)</span> #=&gt; 6
</span><span class="athl-line" data-athl-line="308">
</span><span class="athl-line" data-athl-line="309"># Elixir modules support attributes, there are built-in attributes and you
</span><span class="athl-line" data-athl-line="310"># may also add custom ones.
</span><span class="athl-line" data-athl-line="311"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">MyMod</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="312">  <span style="color: #836f4a;"><span style="color: #8a8980;">@<span style="color: #8a8980;">moduledoc</span> <span style="color: #6f894e;">&quot;&quot;&quot;</span></span></span>
</span><span class="athl-line" data-athl-line="313"><span style="color: #836f4a;"><span style="color: #8a8980;"><span style="color: #6f894e;">  This is a built-in attribute on an example module.</span></span></span>
</span><span class="athl-line" data-athl-line="314"><span style="color: #836f4a;"><span style="color: #8a8980;"><span style="color: #6f894e;">  &quot;&quot;&quot;</span></span></span>
</span><span class="athl-line" data-athl-line="315">
</span><span class="athl-line" data-athl-line="316">  <span style="color: #836f4a;"><span style="color: #cc6d00;">@<span style="color: #4d699b;"><span style="color: #cc6d00;">my_data <span style="color: #b35b79;">100</span></span></span></span></span> # This is a custom attribute.
</span><span class="athl-line" data-athl-line="317">  <span style="color: #597b75;">IO</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">inspect</span><span style="color: #4e8ca2;">(</span><span style="color: #836f4a;"><span style="color: #cc6d00;">@<span style="color: #cc6d00;">my_data</span></span></span><span style="color: #4e8ca2;">)</span> #=&gt; 100
</span><span class="athl-line" data-athl-line="318"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="319">
</span><span class="athl-line" data-athl-line="320"># The pipe operator |&gt; allows you to pass the output of an expression
</span><span class="athl-line" data-athl-line="321"># as the first parameter into a function. 
</span><span class="athl-line" data-athl-line="322">
</span><span class="athl-line" data-athl-line="323"><span style="color: #597b75;">Range</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">new</span><span style="color: #4e8ca2;">(</span><span style="color: #b35b79;">1</span><span style="color: #4e8ca2;">,</span><span style="color: #b35b79;">10</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="324"><span style="color: #836f4a;">|&gt;</span> <span style="color: #597b75;">Enum</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">map</span><span style="color: #4e8ca2;">(</span><span style="color: #624c83;">fn</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">x</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="325"><span style="color: #836f4a;">|&gt;</span> <span style="color: #597b75;">Enum</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">filter</span><span style="color: #4e8ca2;">(</span><span style="color: #624c83;">fn</span> <span style="color: #8a8980;">x</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #4d699b;">rem</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">x</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">)</span> <span style="color: #836f4a;">==</span> <span style="color: #b35b79;">0</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="326">#=&gt; [4, 16, 36, 64, 100]
</span><span class="athl-line" data-athl-line="327">
</span><span class="athl-line" data-athl-line="328">## ---------------------------
</span><span class="athl-line" data-athl-line="329">## -- Structs and Exceptions
</span><span class="athl-line" data-athl-line="330">## ---------------------------
</span><span class="athl-line" data-athl-line="331">
</span><span class="athl-line" data-athl-line="332"># Structs are extensions on top of maps that bring default values,
</span><span class="athl-line" data-athl-line="333"># compile-time guarantees and polymorphism into Elixir.
</span><span class="athl-line" data-athl-line="334"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">Person</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="335">  <span style="color: #624c83;">defstruct</span> <span style="color: #77713f;">name: </span><span style="color: #6693bf;">nil</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">age: </span><span style="color: #b35b79;">0</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">height: </span><span style="color: #b35b79;">0</span>
</span><span class="athl-line" data-athl-line="336"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="337">
</span><span class="athl-line" data-athl-line="338"><span style="color: #8a8980;">joe_info</span> <span style="color: #836f4a;">=</span> <span style="color: #6693bf;">%</span><span style="color: #597b75;">Person</span><span style="color: #4e8ca2;">{</span> <span style="color: #77713f;">name: </span><span style="color: #6f894e;">&quot;Joe&quot;</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">age: </span><span style="color: #b35b79;">30</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">height: </span><span style="color: #b35b79;">180</span> <span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="339">#=&gt; %Person{age: 30, height: 180, name: &quot;Joe&quot;}
</span><span class="athl-line" data-athl-line="340">
</span><span class="athl-line" data-athl-line="341"># Access the value of name
</span><span class="athl-line" data-athl-line="342"><span style="color: #8a8980;">joe_info</span><span style="color: #836f4a;">.</span><span style="color: #8a8980;">name</span> #=&gt; &quot;Joe&quot;
</span><span class="athl-line" data-athl-line="343">
</span><span class="athl-line" data-athl-line="344"># Update the value of age
</span><span class="athl-line" data-athl-line="345"><span style="color: #8a8980;">older_joe_info</span> <span style="color: #836f4a;">=</span> <span style="color: #6693bf;">%</span><span style="color: #4e8ca2;">{</span> <span style="color: #8a8980;">joe_info</span> <span style="color: #836f4a;">|</span> <span style="color: #77713f;">age: </span><span style="color: #b35b79;">31</span> <span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="346">#=&gt; %Person{age: 31, height: 180, name: &quot;Joe&quot;}
</span><span class="athl-line" data-athl-line="347">
</span><span class="athl-line" data-athl-line="348"># The `try` block with the `rescue` keyword is used to handle exceptions
</span><span class="athl-line" data-athl-line="349"><span style="color: #624c83;">try</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="350">  <span style="color: #624c83;">raise</span> <span style="color: #6f894e;">&quot;some error&quot;</span>
</span><span class="athl-line" data-athl-line="351"><span style="color: #624c83;">rescue</span>
</span><span class="athl-line" data-athl-line="352">  <span style="color: #597b75;">RuntimeError</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #6f894e;">&quot;rescued a runtime error&quot;</span>
</span><span class="athl-line" data-athl-line="353">  <span style="color: #8a8980;">_error</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #6f894e;">&quot;this will rescue any error&quot;</span>
</span><span class="athl-line" data-athl-line="354"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="355">#=&gt; &quot;rescued a runtime error&quot;
</span><span class="athl-line" data-athl-line="356">
</span><span class="athl-line" data-athl-line="357"># All exceptions have a message
</span><span class="athl-line" data-athl-line="358"><span style="color: #624c83;">try</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="359">  <span style="color: #624c83;">raise</span> <span style="color: #6f894e;">&quot;some error&quot;</span>
</span><span class="athl-line" data-athl-line="360"><span style="color: #624c83;">rescue</span>
</span><span class="athl-line" data-athl-line="361">  <span style="color: #8a8980;">x</span> <span style="color: #836f4a; font-weight: bold;">in</span> <span style="color: #4e8ca2;">[</span><span style="color: #597b75;">RuntimeError</span><span style="color: #4e8ca2;">]</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="362">    <span style="color: #8a8980;">x</span><span style="color: #836f4a;">.</span><span style="color: #8a8980;">message</span>
</span><span class="athl-line" data-athl-line="363"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="364">#=&gt; &quot;some error&quot;
</span><span class="athl-line" data-athl-line="365">
</span><span class="athl-line" data-athl-line="366">## ---------------------------
</span><span class="athl-line" data-athl-line="367">## -- Concurrency
</span><span class="athl-line" data-athl-line="368">## ---------------------------
</span><span class="athl-line" data-athl-line="369">
</span><span class="athl-line" data-athl-line="370"># Elixir relies on the actor model for concurrency. All we need to write
</span><span class="athl-line" data-athl-line="371"># concurrent programs in Elixir are three primitives: spawning processes,
</span><span class="athl-line" data-athl-line="372"># sending messages and receiving messages.
</span><span class="athl-line" data-athl-line="373">
</span><span class="athl-line" data-athl-line="374"># To start a new process we use the `spawn` function, which takes a function
</span><span class="athl-line" data-athl-line="375"># as argument.
</span><span class="athl-line" data-athl-line="376"><span style="color: #8a8980;">f</span> <span style="color: #836f4a;">=</span> <span style="color: #624c83;">fn</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #b35b79;">2</span> <span style="color: #836f4a;">*</span> <span style="color: #b35b79;">2</span> <span style="color: #624c83;">end</span> #=&gt; #Function&lt;erl_eval.20.80484245&gt;
</span><span class="athl-line" data-athl-line="377"><span style="color: #4d699b;">spawn</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">f</span><span style="color: #4e8ca2;">)</span> #=&gt; #PID&lt;0.40.0&gt;
</span><span class="athl-line" data-athl-line="378">
</span><span class="athl-line" data-athl-line="379"># `spawn` returns a pid (process identifier), you can use this pid to send
</span><span class="athl-line" data-athl-line="380"># messages to the process. To do message passing we use the `send` operator.
</span><span class="athl-line" data-athl-line="381"># For all of this to be useful we need to be able to receive messages. This is
</span><span class="athl-line" data-athl-line="382"># achieved with the `receive` mechanism:
</span><span class="athl-line" data-athl-line="383">
</span><span class="athl-line" data-athl-line="384"># The `receive do` block is used to listen for messages and process
</span><span class="athl-line" data-athl-line="385"># them when they are received. A `receive do` block will only
</span><span class="athl-line" data-athl-line="386"># process one received message. In order to process multiple
</span><span class="athl-line" data-athl-line="387"># messages, a function with a `receive do` block must recursively
</span><span class="athl-line" data-athl-line="388"># call itself to get into the `receive do` block again.
</span><span class="athl-line" data-athl-line="389">
</span><span class="athl-line" data-athl-line="390"><span style="color: #624c83;">defmodule</span> <span style="color: #597b75;">Geometry</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="391">  <span style="color: #624c83;">def</span> <span style="color: #4d699b;">area_loop</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="392">    <span style="color: #624c83;">receive</span> <span style="color: #624c83;">do</span>
</span><span class="athl-line" data-athl-line="393">      <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:rectangle</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">w</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">h</span><span style="color: #4e8ca2;">}</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="394">        <span style="color: #597b75;">IO</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">puts</span><span style="color: #4e8ca2;">(</span><span style="color: #6f894e;">&quot;Area = <span style="color: #6693bf;">#{</span><span style="color: #8a8980;">w</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">h</span><span style="color: #6693bf;">}</span>&quot;</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="395">        <span style="color: #4d699b;">area_loop</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="396">      <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:circle</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">r</span><span style="color: #4e8ca2;">}</span> <span style="color: #836f4a;">-&gt;</span>
</span><span class="athl-line" data-athl-line="397">        <span style="color: #597b75;">IO</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">puts</span><span style="color: #4e8ca2;">(</span><span style="color: #6f894e;">&quot;Area = <span style="color: #6693bf;">#{</span><span style="color: #b35b79;">3.14</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">r</span> <span style="color: #836f4a;">*</span> <span style="color: #8a8980;">r</span><span style="color: #6693bf;">}</span>&quot;</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="398">        <span style="color: #4d699b;">area_loop</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="399">    <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="400">  <span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="401"><span style="color: #624c83;">end</span>
</span><span class="athl-line" data-athl-line="402">
</span><span class="athl-line" data-athl-line="403"># Compile the module and create a process that evaluates `area_loop` in the shell
</span><span class="athl-line" data-athl-line="404"><span style="color: #8a8980;">pid</span> <span style="color: #836f4a;">=</span> <span style="color: #4d699b;">spawn</span><span style="color: #4e8ca2;">(</span><span style="color: #624c83;">fn</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #597b75;">Geometry</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">area_loop</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">)</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span> #=&gt; #PID&lt;0.40.0&gt;
</span><span class="athl-line" data-athl-line="405"># Alternatively
</span><span class="athl-line" data-athl-line="406"><span style="color: #8a8980;">pid</span> <span style="color: #836f4a;">=</span> <span style="color: #4d699b;">spawn</span><span style="color: #4e8ca2;">(</span><span style="color: #597b75;">Geometry</span><span style="color: #4e8ca2;">,</span> <span style="color: #77713f;">:area_loop</span><span style="color: #4e8ca2;">,</span> <span style="color: #4e8ca2;">[</span><span style="color: #4e8ca2;">]</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="407">
</span><span class="athl-line" data-athl-line="408"># Send a message to `pid` that will match a pattern in the receive statement
</span><span class="athl-line" data-athl-line="409"><span style="color: #4d699b;">send</span> <span style="color: #8a8980;">pid</span><span style="color: #4e8ca2;">,</span> <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:rectangle</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">3</span><span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="410">#=&gt; Area = 6
</span><span class="athl-line" data-athl-line="411">#   {:rectangle,2,3}
</span><span class="athl-line" data-athl-line="412">
</span><span class="athl-line" data-athl-line="413"><span style="color: #4d699b;">send</span> <span style="color: #8a8980;">pid</span><span style="color: #4e8ca2;">,</span> <span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:circle</span><span style="color: #4e8ca2;">,</span> <span style="color: #b35b79;">2</span><span style="color: #4e8ca2;">}</span>
</span><span class="athl-line" data-athl-line="414">#=&gt; Area = 12.56000000000000049738
</span><span class="athl-line" data-athl-line="415">#   {:circle,2}
</span><span class="athl-line" data-athl-line="416">
</span><span class="athl-line" data-athl-line="417"># The shell is also a process, you can use `self` to get the current pid
</span><span class="athl-line" data-athl-line="418"><span style="color: #4d699b;">self</span><span style="color: #4e8ca2;">(</span><span style="color: #4e8ca2;">)</span> #=&gt; #PID&lt;0.27.0&gt;
</span><span class="athl-line" data-athl-line="419">
</span><span class="athl-line" data-athl-line="420">## ---------------------------
</span><span class="athl-line" data-athl-line="421">## -- Agents
</span><span class="athl-line" data-athl-line="422">## ---------------------------
</span><span class="athl-line" data-athl-line="423">
</span><span class="athl-line" data-athl-line="424"># An agent is a process that keeps track of some changing value
</span><span class="athl-line" data-athl-line="425">
</span><span class="athl-line" data-athl-line="426"># Create an agent with `Agent.start_link`, passing in a function
</span><span class="athl-line" data-athl-line="427"># The initial state of the agent will be whatever that function returns
</span><span class="athl-line" data-athl-line="428"><span style="color: #4e8ca2;">{</span><span style="color: #77713f;">:ok</span><span style="color: #4e8ca2;">,</span> <span style="color: #8a8980;">my_agent</span><span style="color: #4e8ca2;">}</span> <span style="color: #836f4a;">=</span> <span style="color: #597b75;">Agent</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">start_link</span><span style="color: #4e8ca2;">(</span><span style="color: #624c83;">fn</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #4e8ca2;">[</span><span style="color: #6f894e;">&quot;red&quot;</span><span style="color: #4e8ca2;">,</span> <span style="color: #6f894e;">&quot;green&quot;</span><span style="color: #4e8ca2;">]</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span>
</span><span class="athl-line" data-athl-line="429">
</span><span class="athl-line" data-athl-line="430"># `Agent.get` takes an agent name and a `fn` that gets passed the current state
</span><span class="athl-line" data-athl-line="431"># Whatever that `fn` returns is what you&#39;ll get back
</span><span class="athl-line" data-athl-line="432"><span style="color: #597b75;">Agent</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">get</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">my_agent</span><span style="color: #4e8ca2;">,</span> <span style="color: #624c83;">fn</span> <span style="color: #8a8980;">colors</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #8a8980;">colors</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span> #=&gt; [&quot;red&quot;, &quot;green&quot;]
</span><span class="athl-line" data-athl-line="433">
</span><span class="athl-line" data-athl-line="434"># Update the agent&#39;s state the same way
</span><span class="athl-line" data-athl-line="435"><span style="color: #597b75;">Agent</span><span style="color: #836f4a;">.</span><span style="color: #4d699b;">update</span><span style="color: #4e8ca2;">(</span><span style="color: #8a8980;">my_agent</span><span style="color: #4e8ca2;">,</span> <span style="color: #624c83;">fn</span> <span style="color: #8a8980;">colors</span> <span style="color: #836f4a;">-&gt;</span> <span style="color: #4e8ca2;">[</span><span style="color: #6f894e;">&quot;blue&quot;</span> <span style="color: #836f4a;">|</span> <span style="color: #8a8980;">colors</span><span style="color: #4e8ca2;">]</span> <span style="color: #624c83;">end</span><span style="color: #4e8ca2;">)</span>
</span></code></pre>
</body>
</html>